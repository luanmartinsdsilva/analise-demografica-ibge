<!DOCTYPE html>
<html>
<head>
    <title>Cadastro de Pessoas</title>
</head>
<body>

<h2>Cadastro de Pessoa</h2>

<input type="text" id="nome" placeholder="Nome">
<input type="number" id="idade" placeholder="Idade">
<input type="text" id="cidade" placeholder="Cidade">
<button onclick="criarPessoa()">Cadastrar</button>

<h2>Lista de Pessoas</h2>
<ul id="lista"></ul>

<script>
const API_URL = "https://analise-demografica-ibge.onrender.com";

async function listarPessoas() {
    const response = await fetch(`${API_URL}/pessoas`);
    const pessoas = await response.json();

    const lista = document.getElementById("lista");
    lista.innerHTML = "";

    pessoas.forEach(p => {
        const li = document.createElement("li");
        li.textContent = `${p.id} - ${p.nome} - ${p.idade} anos - ${p.cidade}`;
        lista.appendChild(li);
    });
}

async function criarPessoa() {
    const nome = document.getElementById("nome").value;
    const idade = parseInt(document.getElementById("idade").value);
    const cidade = document.getElementById("cidade").value;

    const response = await fetch(`${API_URL}/pessoas`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            nome: nome,
            idade: idade,
            cidade: cidade
        })
    });

    const data = await response.json();
    console.log("Resposta do servidor:", data);

    listarPessoas();
}

listarPessoas();
</script>


</body>
</html>
